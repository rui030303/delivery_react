{"ast":null,"code":"import _slicedToArray from\"D:/github/delivery/delivery_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from'classnames';import Count from'../Count';import'./index.scss';import{useSelector,useDispatch}from'react-redux';import{increCount,decreCount,clearCart}from'../../store/modules/takeaway';import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.foods;}),cartList=_useSelector.cartList;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var totalPrice=cartList.reduce(function(a,c){return a+c.count*c.price;},0);console.log(cartList);var cart=[];return/*#__PURE__*/_jsxs(\"div\",{className:\"cartContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames('cartOverlay',visible&&'visible'),onClick:function onClick(){setVisible(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return setVisible(true);},className:classNames('icon',cartList.length>0&&'fill'),children:cartList.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"cartCornerMark\",children:cartList.length})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"price\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"payableAmount\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"payableAmountUnit\",children:\"\\xA5\"}),totalPrice.toFixed(2)]})}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"\\u9884\\u4F30\\u53E6\\u9700\\u914D\\u9001\\u8D39 \\xA55\"})]}),cartList.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"goToPreview\",children:\"\\u53BB\\u7ED3\\u7B97\"}):/*#__PURE__*/_jsx(\"div\",{className:\"minFee\",children:\"\\xA520\\u8D77\\u9001\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classNames('cartPanel',visible&&'visible'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:\"\\u8D2D\\u7269\\u8F66\"}),/*#__PURE__*/_jsx(\"span\",{className:\"clearCart\",onClick:function onClick(){return dispatch(clearCart());},children:\"\\u6E05\\u7A7A\\u8D2D\\u7269\\u8F66\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"scrollArea\",children:cartList.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shopPic\",src:item.picture,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"skuInfo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:item.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"payableAmount\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"yuan\",children:\"\\xA5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"price\",children:item.price})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"skuBtnWrapper btnGroup\",children:/*#__PURE__*/_jsx(Count,{count:item.count,onPlus:function onPlus(){dispatch(increCount(item));},onMinus:function onMinus(){dispatch(decreCount(item));}})})]},item.id);})})]})]});};export default Cart;","map":{"version":3,"names":["classNames","Count","useSelector","useDispatch","increCount","decreCount","clearCart","useState","Cart","dispatch","state","foods","cartList","visible","setVisible","totalPrice","reduce","a","c","count","price","console","log","cart","length","toFixed","map","item","picture","name","id"],"sources":["D:/github/delivery/delivery_react/src/components/Cart/index.js"],"sourcesContent":["import classNames from 'classnames'\r\nimport Count from '../Count'\r\nimport './index.scss'\r\nimport { useSelector, useDispatch} from 'react-redux'\r\nimport {increCount, decreCount,clearCart} from '../../store/modules/takeaway'\r\nimport { useState } from 'react'\r\nconst Cart = () => {\r\n  const dispatch = useDispatch()\r\n  const {cartList} = useSelector(state => state.foods)\r\n\r\n  const [visible, setVisible] = useState(false)\r\n\r\n  const totalPrice = cartList.reduce((a,c) => a + c.count * c.price, 0)\r\n  console.log(cartList);\r\n\r\n  const cart = []\r\n  return (\r\n    <div className=\"cartContainer\">\r\n      {/* 遮罩层 添加visible类名可以显示出来 */}\r\n      <div\r\n        className={classNames('cartOverlay',visible&&'visible') }\r\n        onClick={()=>{setVisible(false)}}\r\n      />\r\n      <div className=\"cart\">\r\n        {/* fill 添加fill类名可以切换购物车状态*/}\r\n        {/* 购物车数量 */}\r\n        <div onClick={()=>setVisible(true)} className={classNames('icon', cartList.length>0 && 'fill')}>\r\n          {cartList.length>0 && <div className=\"cartCornerMark\">{cartList.length}</div>}\r\n        </div>\r\n        {/* 购物车价格 */}\r\n        <div className=\"main\">\r\n          <div className=\"price\">\r\n            <span className=\"payableAmount\">\r\n              <span className=\"payableAmountUnit\">¥</span>\r\n              {totalPrice.toFixed(2)}\r\n            </span>\r\n          </div>\r\n          <span className=\"text\">预估另需配送费 ¥5</span>\r\n        </div>\r\n        {/* 结算 or 起送 */}\r\n        {cartList.length>0 ? (\r\n          <div className=\"goToPreview\">去结算</div>\r\n        ) : (\r\n          <div className=\"minFee\">¥20起送</div>\r\n        )}\r\n      </div>\r\n      {/* 添加visible类名 div会显示出来 */}\r\n      <div className={classNames('cartPanel', visible&&'visible') }>\r\n        <div className=\"header\">\r\n          <span className=\"text\">购物车</span>\r\n          <span className=\"clearCart\" onClick={()=>dispatch(clearCart())}>\r\n            清空购物车\r\n          </span>\r\n        </div>\r\n\r\n        {/* 购物车列表 */}\r\n        <div className=\"scrollArea\">\r\n          {cartList.map(item => {\r\n            return (\r\n              <div className=\"cartItem\" key={item.id}>\r\n                <img className=\"shopPic\" src={item.picture} alt=\"\" />\r\n                <div className=\"main\">\r\n                  <div className=\"skuInfo\">\r\n                    <div className=\"name\">{item.name}</div>\r\n                  </div>\r\n                  <div className=\"payableAmount\">\r\n                    <span className=\"yuan\">¥</span>\r\n                    <span className=\"price\">{item.price}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"skuBtnWrapper btnGroup\">\r\n                  {/* 数量组件 */}\r\n                  <Count\r\n                    count={item.count}\r\n                    onPlus={()=>{dispatch(increCount(item))}}\r\n                    onMinus={()=>{dispatch(decreCount(item))}}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Cart\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}