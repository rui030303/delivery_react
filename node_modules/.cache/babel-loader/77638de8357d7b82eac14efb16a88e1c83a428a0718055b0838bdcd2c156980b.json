{"ast":null,"code":"//编写store\nimport{createSlice}from\"@reduxjs/toolkit\";import axios from\"axios\";const foodsStore=createSlice({name:'foods',initialState:{foodsList:[],activeIndex:0,cartList:[]},reducers:{setFoodsList(state,action){state.foodsList=action.payload;},changeActiveIndex(state,action){state.activeIndex=action.payload;},addCart(state,action){const item=state.cartList.find(item=>item.id===action.payload.id);if(item){item.count++;console.log(item.count);}else{state.cartList.push(action.payload);}},increCount(state,action){const item=state.cartList.find(item=>item.id===action.payload.id);item.count++;},decreCount(state,action){const item=state.cartList.find(item=>item.id===action.payload.id);if(item.count===0){return;}item.count--;},clearCart(state){state.cartList=[];}}});const{setFoodsList,changeActiveIndex,addCart,increCount,decreCount,clearCart}=foodsStore.actions;const fetchFoodsList=()=>{return async dispatch=>{const res=await axios.get('https://my-json-server.typicode.com/rui030303/data_delivery/takeaway');dispatch(setFoodsList(res.data));};};export{fetchFoodsList,changeActiveIndex,addCart,increCount,decreCount,clearCart};const reducer=foodsStore.reducer;export default reducer;","map":{"version":3,"names":["createSlice","axios","foodsStore","name","initialState","foodsList","activeIndex","cartList","reducers","setFoodsList","state","action","payload","changeActiveIndex","addCart","item","find","id","count","console","log","push","increCount","decreCount","clearCart","actions","fetchFoodsList","dispatch","res","get","data","reducer"],"sources":["D:/github/delivery/delivery_react/src/store/modules/takeaway.js"],"sourcesContent":["//编写store\r\n\r\nimport {createSlice} from \"@reduxjs/toolkit\"\r\nimport axios from \"axios\"\r\n\r\n\r\nconst foodsStore = createSlice({\r\n    name:'foods',\r\n    initialState:{\r\n        foodsList:[],\r\n        activeIndex : 0,\r\n        cartList : []\r\n    },\r\n    reducers:{\r\n        setFoodsList(state, action){\r\n            state.foodsList = action.payload\r\n        },\r\n        changeActiveIndex(state, action){\r\n            state.activeIndex = action.payload\r\n        },\r\n        addCart(state, action){\r\n            const item = state.cartList.find(item => item.id === action.payload.id)\r\n            if (item){\r\n                item.count++\r\n                console.log(item.count);\r\n            }else{\r\n                state.cartList.push(action.payload)\r\n            }\r\n        },\r\n        increCount (state, action) {\r\n            const item = state.cartList.find(item => item.id === action.payload.id)\r\n            item.count++\r\n        },\r\n        decreCount (state, action) {\r\n            const item = state.cartList.find(item => item.id === action.payload.id)\r\n            if (item.count === 0 ){\r\n                return \r\n            }\r\n            item.count--\r\n        },\r\n        clearCart(state){\r\n            state.cartList = []\r\n        }\r\n    }\r\n})\r\nconst {setFoodsList,changeActiveIndex, addCart,increCount, decreCount,clearCart} = foodsStore.actions\r\nconst fetchFoodsList = ()=>{\r\n    return async(dispatch)=>{\r\n        const res = await axios.get('https://my-json-server.typicode.com/rui030303/data_delivery/takeaway')\r\n        dispatch(setFoodsList(res.data))\r\n    }\r\n}\r\n\r\n\r\nexport {fetchFoodsList,changeActiveIndex, addCart,increCount, decreCount,clearCart}\r\nconst reducer = foodsStore.reducer\r\nexport default reducer"],"mappings":"AAAA;AAEA,OAAQA,WAAW,KAAO,kBAAkB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAGzB,KAAM,CAAAC,UAAU,CAAGF,WAAW,CAAC,CAC3BG,IAAI,CAAC,OAAO,CACZC,YAAY,CAAC,CACTC,SAAS,CAAC,EAAE,CACZC,WAAW,CAAG,CAAC,CACfC,QAAQ,CAAG,EACf,CAAC,CACDC,QAAQ,CAAC,CACLC,YAAYA,CAACC,KAAK,CAAEC,MAAM,CAAC,CACvBD,KAAK,CAACL,SAAS,CAAGM,MAAM,CAACC,OAAO,CACpC,CAAC,CACDC,iBAAiBA,CAACH,KAAK,CAAEC,MAAM,CAAC,CAC5BD,KAAK,CAACJ,WAAW,CAAGK,MAAM,CAACC,OAAO,CACtC,CAAC,CACDE,OAAOA,CAACJ,KAAK,CAAEC,MAAM,CAAC,CAClB,KAAM,CAAAI,IAAI,CAAGL,KAAK,CAACH,QAAQ,CAACS,IAAI,CAACD,IAAI,EAAIA,IAAI,CAACE,EAAE,GAAKN,MAAM,CAACC,OAAO,CAACK,EAAE,CAAC,CACvE,GAAIF,IAAI,CAAC,CACLA,IAAI,CAACG,KAAK,EAAE,CACZC,OAAO,CAACC,GAAG,CAACL,IAAI,CAACG,KAAK,CAAC,CAC3B,CAAC,IAAI,CACDR,KAAK,CAACH,QAAQ,CAACc,IAAI,CAACV,MAAM,CAACC,OAAO,CAAC,CACvC,CACJ,CAAC,CACDU,UAAUA,CAAEZ,KAAK,CAAEC,MAAM,CAAE,CACvB,KAAM,CAAAI,IAAI,CAAGL,KAAK,CAACH,QAAQ,CAACS,IAAI,CAACD,IAAI,EAAIA,IAAI,CAACE,EAAE,GAAKN,MAAM,CAACC,OAAO,CAACK,EAAE,CAAC,CACvEF,IAAI,CAACG,KAAK,EAAE,CAChB,CAAC,CACDK,UAAUA,CAAEb,KAAK,CAAEC,MAAM,CAAE,CACvB,KAAM,CAAAI,IAAI,CAAGL,KAAK,CAACH,QAAQ,CAACS,IAAI,CAACD,IAAI,EAAIA,IAAI,CAACE,EAAE,GAAKN,MAAM,CAACC,OAAO,CAACK,EAAE,CAAC,CACvE,GAAIF,IAAI,CAACG,KAAK,GAAK,CAAC,CAAE,CAClB,OACJ,CACAH,IAAI,CAACG,KAAK,EAAE,CAChB,CAAC,CACDM,SAASA,CAACd,KAAK,CAAC,CACZA,KAAK,CAACH,QAAQ,CAAG,EAAE,CACvB,CACJ,CACJ,CAAC,CAAC,CACF,KAAM,CAACE,YAAY,CAACI,iBAAiB,CAAEC,OAAO,CAACQ,UAAU,CAAEC,UAAU,CAACC,SAAS,CAAC,CAAGtB,UAAU,CAACuB,OAAO,CACrG,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAI,CACvB,MAAO,MAAM,CAAAC,QAAQ,EAAG,CACpB,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAA3B,KAAK,CAAC4B,GAAG,CAAC,sEAAsE,CAAC,CACnGF,QAAQ,CAAClB,YAAY,CAACmB,GAAG,CAACE,IAAI,CAAC,CAAC,CACpC,CAAC,CACL,CAAC,CAGD,OAAQJ,cAAc,CAACb,iBAAiB,CAAEC,OAAO,CAACQ,UAAU,CAAEC,UAAU,CAACC,SAAS,EAClF,KAAM,CAAAO,OAAO,CAAG7B,UAAU,CAAC6B,OAAO,CAClC,cAAe,CAAAA,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}